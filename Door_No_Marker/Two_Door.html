<!-- 將門拆成兩個物件進行動畫 -->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Animation Example</title>

    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.min.js"></script>
    <!-- 引入 aframe-extras（包含 animation-mixer）-->
    <!-- <script src="https://cdn.jsdelivr.net/npm/animejs/lib/anime.iife.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    <!-- <style>
      body { margin: 0; overflow: hidden; }
      /* hide scene until everything is ready */
      #ar-scene { visibility: hidden; }
    </style> -->
  </head>

  <body style="margin: 0; overflow: hidden;">
    <!-- 關閉 VR 按鈕 -->
    <a-scene id="ar-scene" vr-mode-ui="enabled: false"            
      embedded arjs="sourceType: webcam; debugUIEnabled: false; detectMarkers: false;">

      <!-- Marker 指定 pattern 檔案 -->
      <!-- <a-marker type="pattern" url="pattern-marker.patt">
      </a-marker> -->
      <!-- 載入 .glb 檔案（包含動畫） -->
       <!-- animation-mixer="clip: *; loop: once; clampWhenFinished: true" -->
      <!-- <a-entity id="model-container"> -->
      <a-entity
        position="0 1.5 -5"
        >
        <a-entity id="leftdoor"
          position="-1 0 0"
          rotation="0 0 0">
          <a-entity
            gltf-model="../assets/Open_Door__v4_leftDoor_no_animate.glb"
            rotation="0 0 0"
            scale="0.5 0.5 0.5"
            position="1 0 0"
            open-door-animation
          >
          </a-entity>
        </a-entity>
        <!-- color="#7BC8A4" color="#FFFFFF" position="-2 0 -5" rotation="0 0 0" color="#4CC3D9"
          depth="0.1" height="0.1" width="0.1" -->

        <a-entity id="rightdoor"
          position="1 0 0"
          rotation="0 0 0">
          <a-entity
            gltf-model="../assets/Open_Door__v4_rightDoor_no_animate.glb"
            rotation="0 0 0"
            scale="0.5 0.5 0.5"
            position="-1 0 0"
            open-door-animation
          >
          </a-entity>
        </a-entity>

      </a-entity>
      <a-camera>
        <!-- <a-cursor></a-cursor> -->
      </a-camera>
      <!-- <a-entity camera look-controls mouse-cursor></a-entity> -->
      <a-entity id="mouseCursor" cursor="rayOrigin: mouse"></a-entity>
        
  
  
      <!-- <a-entity camera></a-entity> -->
      <!-- 相機 -->
       <!-- animation-mixer="loop: once; clampWhenFinished: true" -->
        <!-- startAt:100 -->
    </a-scene>
    <script>
      AFRAME.registerComponent('open-door-animation', {
        init: function () {
          // var data = this.data;
          var el = this.el;
          // var lastIndex = -1;
          // var COLORS = ['red', 'green', 'blue'];
          this.el.addEventListener('click', function (evt) {
            var leftdoor = document.querySelector('#leftdoor');
            var rightdoor = document.querySelector('#rightdoor');
            leftdoor.setAttribute('rotation', '0 90 0');
            rightdoor.setAttribute('rotation', '0 -90 0');
            // el.setAttribute('rotation', '0 90 0');


            // el.object3D.scale.copy(data.to);
            // el.play();
            // el.emit(`startanim001`, null, false);
            // 更新元件屬性
            // el.setAttribute('animation-mixer', {                            
            //                     loop: once, clampWhenFinished: true});
            // el.setAttribute("animation-mixer", "loop: once;");
            console.log("click sccuss!")
            // lastIndex = (lastIndex + 1) % COLORS.length;
            // this.setAttribute('material', 'color', COLORS[lastIndex]);
            // console.log('I was clicked at: ', evt.detail.intersection.point);
          });
        }
      });
    </script>
  </body>
</html>
